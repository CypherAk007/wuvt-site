prod:
  procname-prefix-spaced: wuvt-site
  master: 1
  socket: /run/uwsgi/wuvt-site.sock
  chmod-socket: 600
  touch-reload: /srv/http/wuvt-site/reload.txt
  processes: 20
  offload-threads: 2
  harakiri: 30

  plugins: python,router_uwsgi
  if-env: VIRTUAL_ENV
  virtualenv: '%(_)'
  endif: 
  module: wuvt
  callable: app

  collect-header: X-SSE-Offload SSE_OFFLOAD
  collect-header: X-SSE-Server SSE_SERVER
  collect-header: X-SSE-Channel SSE_CHANNEL
  response-route-if-not: 'empty:${SSE_OFFLOAD} disableheaders:'
  response-route-if-not: 'empty:${SSE_OFFLOAD} uwsgi:/run/uwsgi/wuvt-sse.sock,0,0'

dev:
  procname-prefix-spaced: wuvt-site
  master: 1
  http-socket: ':9090'
  processes: 5
  offload-threads: 1
  harakiri: 30

  plugins: python,router_uwsgi
  py-autoreload: 1
  if-env: VIRTUAL_ENV
  virtualenv: '%(_)'
  endif: 
  module: wuvt
  callable: app

  collect-header: X-SSE-Offload SSE_OFFLOAD
  collect-header: X-SSE-Server SSE_SERVER
  collect-header: X-SSE-Channel SSE_CHANNEL
  response-route-if-not: 'empty:${SSE_OFFLOAD} disableheaders:'
  response-route-if-not: 'empty:${SSE_OFFLOAD} uwsgi:/run/uwsgi/wuvt-sse.sock,0,0'

sse:
  procname-prefix-spaced: sse
  master: 1
  socket: /run/uwsgi/wuvt-sse.sock
  chmod-socket: 600
  gevent: 1000
  gevent-monkey-patch: 1

  plugins: python
  if-env: VIRTUAL_ENV
  virtualenv: '%(_)'
  endif: 
  module: sse
